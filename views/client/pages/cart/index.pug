extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
  +alert-success(3000)
  +alert-error(3000)

  .container.my-4.cart-page
    .row.mb-3
      .col-12
        h1(class="h4 mb-0") Mục đề xuất

    if cartDetail.projects.length > 0
      .row
        .col-12
          .card.cart-card.shadow-sm
            .card-header.bg-light.d-flex.justify-content-between.align-items-center
              h2(class="h6 mb-0") Công việc bạn đã thêm vào mục đề xuất
              a(
                href="/checkout"
                class="btn btn-primary btn-sm"
              ) Tiếp tục gửi đề xuất →

            .card-body.p-0
              table(class="table table-hover table-bordered mb-0")
                thead.thead-light
                  tr
                    th(style="width: 60px;") STT
                    th Tên công việc
                    th Ngân sách
                    th Hạn chót
                    th(style="width: 200px;") Hành động
                tbody
                  each item, index in cartDetail.projects
                    tr
                      td #{index + 1}

                      td
                        a(href=`/projects/detail/${item.project_id}`) #{item.projectInfo.title}

                      td
                        | #{item.projectInfo.budget.min} - #{item.projectInfo.budget.max} Triệu VNĐ

                      td
                        - var d = new Date(item.projectInfo.deadline);
                        - var day = d.getDate().toString().padStart(2, "0");
                        - var month = (d.getMonth() + 1).toString().padStart(2, "0");
                        - var year = d.getFullYear();
                        | #{day}/#{month}/#{year}

                      td
                        .d-flex.align-items-center
                          a(
                            href="/checkout"
                            class="btn btn-success btn-sm d-flex align-items-center mr-2"
                          )
                            i.fas.fa-paper-plane.mr-1

                          a(
                            href=`/cart/delete/${item.project_id}`
                            class="btn btn-light btn-sm text-danger border"
                            title="Xóa công việc"
                          )
                            i.fas.fa-trash



    else
      .row
        .col-12
          .alert.alert-info.text-center
            | Bạn chưa có công việc nào trong mục đề xuất.
            |  
            a(href="/projects") Xem danh sách công việc
            |  để thêm công việc phù hợp.
