extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
  +alert-success(5000)
  +alert-error(5000)

  .container.my-3
    .row
      .col-12
        +box-head("Đặt hàng")

    .row
      .col-12
        table(class="table table-bordered")
          thead
            tr
              th STT
              th Tên
              th Ngân sách
              th Hạn cháo giá
          tbody
            if(cartDetail.projects.length > 0)
              each item, index  in cartDetail.projects
                tr
                  td #{index + 1}
                  td #{item.projectInfo.title}
                  td #{item.projectInfo.budget.min} - #{item.projectInfo.budget.max} VNĐ
                  - const d = new Date(item.projectInfo.deadline);
                  - const formattedDate = `${d.getDate().toString().padStart(2, '0')}/${(d.getMonth()+1).toString().padStart(2, '0')}/${d.getFullYear()}`;
                  td #{formattedDate}
            else
              tr
                td(
                  colspan="7"
                  class="text-center"
                ) Giỏ hàng trống.

    if (cartDetail.projects.length > 0)
      .row
        .col-12
          .card.p-4.my-4
            form(
              action="/checkout/proposal"
              method="POST"
              enctype="multipart/form-data"
            )
              div(class="form-group")
                label(for="fullName") Họ tên
                input(
                  type="text"
                  class="form-control"
                  id="fullName"
                  name="fullName"
                  required
                )

              div(class="form-group")
                label(for="email") Email
                input(
                  type="text"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                )

              div(class="form-group")
                label(for="cv") Tải lên CV
                input(
                  type="file"
                  class="form-control"
                  id="cv"
                  name="cv"
                  accept=".pdf,.doc,.docx"
                  required
                )

              div(class="form-group")
                button(
                  type="submit"
                  class="btn btn-success btn-block"
                ) GỬI ĐỀ XUẤT
