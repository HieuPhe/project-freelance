extends ../../layouts/default

block main
  .container.my-4
    h1.h4.mb-3 Đề xuất của tôi

    if proposals.length
      table.table.table-hover.table-bordered
        thead
          tr
            th Thứ tự
            th Công việc
            th Ngân sách
            th Deadline
            th Trạng thái
            th Ngày gửi
        tbody
          each item, index in proposals
            - var p = item.projects && item.projects.length ? item.projects[0] : null;
            tr
              td #{index + 1}

              // TÊN JOB
              td
                if p && p.project_id
                  a(href=`/projects/${p.project_id.slug}`)
                    | #{p.project_id.title}
                else
                  | [Công việc đã bị xóa]

              // NGÂN SÁCH
              td
                if p && p.budget
                  | #{p.budget.min} - #{p.budget.max} Triệu VNĐ
                else
                  | -

              // DEADLINE
              td
                if p && p.deadline
                  | #{p.deadline.toLocaleDateString("vi-VN")}
                else
                  | -

              // TRẠNG THÁI PROPOSAL
              td
                if item.status === "SUBMITTED"
                  span.badge.badge-secondary Chờ duyệt
                else if item.status === "ACCEPTED"
                  span.badge.badge-success Đã nhận
                else if item.status === "REJECTED"
                  span.badge.badge-danger Từ chối
                else
                  span.badge.badge-light #{item.status}

              // NGÀY GỬI
              td #{item.createdAt.toLocaleDateString("vi-VN")}
    else
      .alert.alert-info.mt-3 Chưa có đề xuất nào.
