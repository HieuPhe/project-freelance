extends ../../layouts/default

block main
  .container.my-4
    h1.h4.mb-3 Cập nhật tiến độ: #{project.title}

    form(
      method="POST"
      action=`/progress/freelancer/${projectId}`
    )
      .form-group
        label Nội dung
        textarea.form-control(
          name="content"
          rows="3"
          required
        )

      .form-group
        label Phần trăm hoàn thành
        input.form-control(
          type="number"
          name="percent"
          min="0"
          max="100"
          required
        )

      button.btn.btn-primary(type="submit") Cập nhật tiến độ

    hr

    h5.mt-4 Lịch sử tiến độ

    if progressList.length
      each item, index in progressList
        .border.rounded.p-2.mb-2
          if index === 0
            span.badge.badge-primary.mb-1 Mới nhất

          b #{item.freelancerId.fullName}
          small.text-muted.ml-2 #{item.createdAt.toLocaleString("vi-VN")}

          p.mt-2 #{item.content}

          if item.percent !== undefined
            span.badge.badge-info #{item.percent}%
    else
      p.text-muted Chưa có cập nhật nào.
